<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eric R. Scott">

<title>Making Your First R Package üì¶ (Instructor Notes)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="instructor_notes_files/libs/clipboard/clipboard.min.js"></script>
<script src="instructor_notes_files/libs/quarto-html/quarto.js"></script>
<script src="instructor_notes_files/libs/quarto-html/popper.min.js"></script>
<script src="instructor_notes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="instructor_notes_files/libs/quarto-html/anchor.min.js"></script>
<link href="instructor_notes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="instructor_notes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="instructor_notes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="instructor_notes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="instructor_notes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#project-setup" id="toc-project-setup" class="nav-link" data-scroll-target="#project-setup">Project Setup</a>
  <ul class="collapse">
  <li><a href="#create-empty-repo-on-github" id="toc-create-empty-repo-on-github" class="nav-link" data-scroll-target="#create-empty-repo-on-github">Create empty repo on GitHub</a></li>
  <li><a href="#create-new-r-project-from-repo" id="toc-create-new-r-project-from-repo" class="nav-link" data-scroll-target="#create-new-r-project-from-repo">Create new R project from repo</a></li>
  <li><a href="#load-needed-packages" id="toc-load-needed-packages" class="nav-link" data-scroll-target="#load-needed-packages">Load needed packages</a></li>
  </ul></li>
  <li><a href="#gitgithub-setup" id="toc-gitgithub-setup" class="nav-link" data-scroll-target="#gitgithub-setup">Git/GitHub setup</a>
  <ul class="collapse">
  <li><a href="#configure-git" id="toc-configure-git" class="nav-link" data-scroll-target="#configure-git">Configure Git</a></li>
  <li><a href="#git-and-github" id="toc-git-and-github" class="nav-link" data-scroll-target="#git-and-github">Git and GitHub</a></li>
  </ul></li>
  <li><a href="#package-setup" id="toc-package-setup" class="nav-link" data-scroll-target="#package-setup">Package Setup</a>
  <ul class="collapse">
  <li><a href="#convert-into-a-package" id="toc-convert-into-a-package" class="nav-link" data-scroll-target="#convert-into-a-package">Convert into a package</a></li>
  <li><a href="#files-created" id="toc-files-created" class="nav-link" data-scroll-target="#files-created">Files created</a></li>
  <li><a href="#add-a-readme" id="toc-add-a-readme" class="nav-link" data-scroll-target="#add-a-readme">Add a README</a></li>
  <li><a href="#sync-with-github" id="toc-sync-with-github" class="nav-link" data-scroll-target="#sync-with-github">Sync with GitHub</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a>
  <ul class="collapse">
  <li><a href="#add-a-function" id="toc-add-a-function" class="nav-link" data-scroll-target="#add-a-function">Add a function</a></li>
  <li><a href="#check" id="toc-check" class="nav-link" data-scroll-target="#check"><code>check()</code></a></li>
  <li><a href="#add-documentation" id="toc-add-documentation" class="nav-link" data-scroll-target="#add-documentation">Add documentation</a></li>
  <li><a href="#check-again" id="toc-check-again" class="nav-link" data-scroll-target="#check-again"><code>check()</code> again</a></li>
  <li><a href="#install" id="toc-install" class="nav-link" data-scroll-target="#install">Install</a></li>
  <li><a href="#add-a-dependency" id="toc-add-a-dependency" class="nav-link" data-scroll-target="#add-a-dependency">Add A dependency</a></li>
  </ul></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#add-a-data-set" id="toc-add-a-data-set" class="nav-link" data-scroll-target="#add-a-data-set">Add a data set</a></li>
  </ul></li>
  <li><a href="#testing" id="toc-testing" class="nav-link" data-scroll-target="#testing">Testing</a>
  <ul class="collapse">
  <li><a href="#writing-tests" id="toc-writing-tests" class="nav-link" data-scroll-target="#writing-tests">Writing tests</a></li>
  <li><a href="#continuous-integration" id="toc-continuous-integration" class="nav-link" data-scroll-target="#continuous-integration">Continuous Integration</a></li>
  </ul></li>
  <li><a href="#sharing-your-package" id="toc-sharing-your-package" class="nav-link" data-scroll-target="#sharing-your-package">Sharing your Package</a>
  <ul class="collapse">
  <li><a href="#installing-from-github" id="toc-installing-from-github" class="nav-link" data-scroll-target="#installing-from-github">Installing from GitHub</a></li>
  </ul></li>
  <li><a href="#polishing-your-package" id="toc-polishing-your-package" class="nav-link" data-scroll-target="#polishing-your-package">Polishing your Package</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a>
  <ul class="collapse">
  <li><a href="#set-up-build-tools" id="toc-set-up-build-tools" class="nav-link" data-scroll-target="#set-up-build-tools">Set up build tools</a>
  <ul class="collapse">
  <li><a href="#macos" id="toc-macos" class="nav-link" data-scroll-target="#macos">macOS</a></li>
  <li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows">Windows</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Making Your First R Package üì¶ (Instructor Notes)</h1>
<p class="subtitle lead">ResBazAZ 2023</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Eric R. Scott <a href="https://orcid.org/0000-0002-7430-7879" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Communications &amp; Cyber Technologies, University of Arizona
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p><a href="https://cct-datascience.quarto.pub/making-your-first-r-pkg-slides/#/title-slide">Slides</a></p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember, even if you don‚Äôt ever make an R package that goes on CRAN (or any R package at all), the skills covered in this workshop will be helpful!</p>
</div>
</div>
</section>
<section id="project-setup" class="level1">
<h1>Project Setup</h1>
<section id="create-empty-repo-on-github" class="level2">
<h2 class="anchored" data-anchor-id="create-empty-repo-on-github">Create empty repo on GitHub</h2>
<ul>
<li><p>repo name = package name</p></li>
<li><p>Copy https url</p></li>
</ul>
</section>
<section id="create-new-r-project-from-repo" class="level2">
<h2 class="anchored" data-anchor-id="create-new-r-project-from-repo">Create new R project from repo</h2>
<ul>
<li>New Project &gt; Version Control &gt; Git, paste in URL</li>
</ul>
</section>
<section id="load-needed-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-needed-packages">Load needed packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: usethis</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /Users/ericscott/Documents/GitHub/CALS-workshops</code></pre>
</div>
</div>
</section>
</section>
<section id="gitgithub-setup" class="level1">
<h1>Git/GitHub setup</h1>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is all a one-time per computer setup</p>
</div>
</div>
<section id="configure-git" class="level2">
<h2 class="anchored" data-anchor-id="configure-git">Configure Git</h2>
<p>Get a checklist of what to do to set things up:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git_sitrep</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Git config (global)
‚Ä¢ Name: 'Eric R. Scott'
‚Ä¢ Email: 'scottericr@gmail.com'
‚Ä¢ Global (user-level) gitignore file: '~/.gitignore'
‚Ä¢ Vaccinated: TRUE
‚Ñπ Defaulting to 'https' Git protocol
‚Ä¢ Default Git protocol: 'https'
‚Ä¢ Default initial branch name: 'main'
GitHub
‚Ä¢ Default GitHub host: 'https://github.com'
‚Ä¢ Personal access token for 'https://github.com': '&lt;discovered&gt;'
‚Ä¢ GitHub user: 'Aariq'
‚Ä¢ Token scopes: 'gist, repo, user, workflow'
‚Ä¢ Email(s): 'scottericr@gmail.com (primary)', 'ericscott@ufl.edu', 'ericrscott@email.arizona.edu', 'ericrscott@arizona.edu'
Git repo for current project
‚Ä¢ Active usethis project: '/Users/ericscott/Documents/GitHub/CALS-workshops'
‚Ä¢ Default branch: 'main'
‚Ä¢ Current local branch -&gt; remote tracking branch:
  'first-r-package' -&gt; 'origin/first-r-package'
GitHub remote configuration
‚Ä¢ Type = 'ours'
‚Ä¢ Host = 'https://github.com'
‚Ä¢ Config supports a pull request = TRUE
‚Ä¢ origin = 'cct-datascience/CALS-workshops' (can push)
‚Ä¢ upstream = &lt;not configured&gt;
‚Ä¢ Desc = 'origin' is both the source and primary repo.
  
  Read more about the GitHub remote configurations that usethis supports at:
  'https://happygitwithr.com/common-remote-setups.html'</code></pre>
</div>
</div>
<p>Add a global <code>.gitignore</code> to prevent you from accidentally sharing sensitive files on GitHub:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git_vaccinate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Introduce yourself to git:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_git_config</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">user.name =</span> <span class="st">"your name"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">user.email =</span> <span class="st">"youremail@arizona.com"</span>, <span class="co">#email you used to sign up for GitHub account</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Set a default branch name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#sets your default branch name to "main"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git_default_branch_configure</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="git-and-github" class="level2">
<h2 class="anchored" data-anchor-id="git-and-github">Git and GitHub</h2>
<p>There are some other things to do in <code>git_sitrep()</code>, but first, let‚Äôs make our first commit. Make a commit using the git pane in RStudio. Commit message can be something like ‚Äúinitial commit‚Äù</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check how we're doing</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git_sitrep</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Set up a personal access token (PAT). This is necessary to securely send things between your computer and GitHub.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create_github_token</span>() <span class="co">#takes you to external website. Add description, but keep defaults</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Store that token on your computer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#paste in PAT from GitHub</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Double-check that it worked:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git_sitrep</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now everything should be set (except maybe <code>upstream</code>) with no ‚ùås</p>
</section>
</section>
<section id="package-setup" class="level1">
<h1>Package Setup</h1>
<section id="convert-into-a-package" class="level2">
<h2 class="anchored" data-anchor-id="convert-into-a-package">Convert into a package</h2>
<p>We‚Äôll use <code>create_package()</code> to convert our current project to a package. It takes a <code>path</code> argument that we‚Äôll supply with <code>here::here()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>() <span class="co">#absolute path to current project</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create_package</span>(<span class="fu">here</span>()) <span class="co">#converts current project to skeleton R package.  Overwrites files.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will open a new RStudio window, so you can close the old one.</p>
<p>Re-load devtools with <code>library(devtools)</code></p>
</section>
<section id="files-created" class="level2">
<h2 class="anchored" data-anchor-id="files-created">Files created</h2>
<ul>
<li><p><code>.gitignore</code> - list files you don‚Äôt want to be on GitHub</p></li>
<li><p><code>.Rbuildignore</code> - files that you want on GitHub, but that can‚Äôt be part of your R package</p></li>
<li><p><code>DESCRIPTION</code> - contains package metadata</p></li>
<li><p><code>&lt;package name&gt;.Rproj</code> - holds settings for the RStudio Project</p></li>
<li><p><code>NAMESPACE</code> - read-only file that will be generated once we add some functions</p></li>
<li><p><code>R/</code> - this is where you‚Äôll put R code for your package‚Äôs functions</p></li>
</ul>
</section>
<section id="add-a-readme" class="level2">
<h2 class="anchored" data-anchor-id="add-a-readme">Add a README</h2>
<ul>
<li><p>run <code>use_readme_md()</code> and edit the README.</p></li>
<li><p>You could use <code>use_readme_rmd()</code> if you want a README that executes some code, like running an example.</p></li>
</ul>
</section>
<section id="sync-with-github" class="level2">
<h2 class="anchored" data-anchor-id="sync-with-github">Sync with GitHub</h2>
<ul>
<li><p>Commit (message = ‚Äúconvert to package‚Äù) and push</p></li>
<li><p>Inspect GitHub repo, notice how README.md is rendered</p></li>
<li><p>Notice how files in .gitignore aren‚Äôt there</p></li>
</ul>
</section>
</section>
<section id="functions" class="level1">
<h1>Functions</h1>
<section id="add-a-function" class="level2">
<h2 class="anchored" data-anchor-id="add-a-function">Add a function</h2>
<ol type="1">
<li><p>New .R file, save as greet.R</p></li>
<li><p>Start with super simple:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>greet.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>greet <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Hello!"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello!</code></pre>
</div>
</div></li>
<li><p><code>load_all()</code> and run <code>greet()</code></p></li>
<li><p>Add argument:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>greet.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>greet <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Hello "</span>, name, <span class="st">"!"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></li>
<li><p><code>load_all()</code> and <code>greet("yourname")</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>(<span class="st">"Eric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello Eric!</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in cat("Hello ", name, "!", sep = ""): argument "name" is missing, with no default</code></pre>
</div>
</div></li>
<li><p><code>greet()</code> errors, so let‚Äôs add a default</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>greet.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>greet <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">name =</span> <span class="st">"User"</span>) {</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Hello "</span>, name, <span class="st">"!"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></li>
<li><p><code>load_all()</code> and <code>greet()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello User!</code></pre>
</div>
</div></li>
</ol>
</section>
<section id="check" class="level2">
<h2 class="anchored" data-anchor-id="check"><code>check()</code></h2>
<p>Run <code>check()</code> and address stuff:</p>
<ul>
<li><p>Edit author field in <code>DESCRIPTION</code></p></li>
<li><p>run <code>use_mit_license()</code></p></li>
</ul>
</section>
<section id="add-documentation" class="level2">
<h2 class="anchored" data-anchor-id="add-documentation">Add documentation</h2>
<ol type="1">
<li>With cursor in function definition, add roxygen skeleton and fill it out</li>
<li><code>document()</code> then <code>?greet</code></li>
<li>Explore and commit changes</li>
<li>Discuss roxygen2 fields and where to get more help on this</li>
<li>What does <code>@export</code> mean? When would you <em>not</em> want a function to be exported?</li>
</ol>
</section>
<section id="check-again" class="level2">
<h2 class="anchored" data-anchor-id="check-again"><code>check()</code> again</h2>
<p>should pass</p>
</section>
<section id="install" class="level2">
<h2 class="anchored" data-anchor-id="install">Install</h2>
<p>Should be able to install the package now, load it with <code>library()</code>, etc.</p>
</section>
<section id="add-a-dependency" class="level2">
<h2 class="anchored" data-anchor-id="add-a-dependency">Add A dependency</h2>
<p>Let‚Äôs make the output colorful with the <code>cli</code> package!</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>greet.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>greet <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">name =</span> <span class="st">"User"</span>) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Hello "</span>, cli<span class="sc">::</span><span class="fu">col_cyan</span>(name), <span class="st">"!</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">greet</span>(<span class="st">"Eric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello Eric!</code></pre>
</div>
</div>
<ol type="1">
<li><p>Notice the syntax‚Äî<code>pkgname::function()</code>‚Äîthis is <em>essential</em> so that your package knows which package functions are from!</p></li>
<li><p>Run <code>check()</code> and notice the warning:</p>
<pre><code>'::' or ':::' import not declared from: ‚Äòcli‚Äô</code></pre></li>
<li><p>Solution: <code>use_package("cli")</code></p></li>
<li><p>Inspect DESCRIPTION and run <code>check()</code> again</p></li>
</ol>
</section>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<section id="add-a-data-set" class="level2">
<h2 class="anchored" data-anchor-id="add-a-data-set">Add a data set</h2>
<ul>
<li><p>Read in dataset from URL (paste code into chat I guess?)</p></li>
<li><p><code>use_data()</code> to add dataset to your package</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read in data as an R object</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>baked_goods <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://www.ericrscott.com/files/baked_goods_long.csv"</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#use_data() on the R object to add to your package</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">use_data</span>(baked_goods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Inspect output and see what is changed</p>
<ul>
<li><p>lazy data means the dataset is available when you load the package without having to run <code>data(baked_goods)</code>. Just load your package and <code>baked_goods</code> is available.</p></li>
<li><p>.rda files are for saving R objects</p></li>
</ul></li>
<li><p>Document the data set. <a href="https://r-pkgs.org/data.html#sec-documenting-data" class="uri">https://r-pkgs.org/data.html#sec-documenting-data</a></p>
<ul>
<li><p>Create a <code>R/data.R</code>, paste in the example and edit</p></li>
<li><p>Never <code>@export</code> a dataset, they‚Äôre available through lazy loading and this isn‚Äôt needed.</p></li>
</ul></li>
<li><p>Run <code>document()</code> and check <code>?baked_goods</code></p></li>
<li><p>Run <code>check()</code>, commit and push</p></li>
</ul>
</section>
</section>
<section id="testing" class="level1">
<h1>Testing</h1>
<section id="writing-tests" class="level2">
<h2 class="anchored" data-anchor-id="writing-tests">Writing tests</h2>
<ul>
<li><p>‚ÄúUnit tests‚Äù check that your code gives desired output, errors when it‚Äôs supposed to, etc.</p></li>
<li><p>Set up with <code>use_testthat()</code></p></li>
<li><p>Inspect changes</p>
<ul>
<li><p><code>tests/</code></p></li>
<li><p><code>DESCRIPTION</code></p></li>
</ul></li>
<li><p>Add a test for our function with <code>use_test("greet")</code></p></li>
<li><p>Run test with button and with <code>test()</code> and with <code>check()</code></p></li>
<li><p>Edit test to make sense for greet</p></li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>test-greet.R</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"greet works with names"</span>, {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">greet</span>(<span class="st">"Eric"</span>), <span class="st">"Hello Eric!"</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">"greet works with default"</span>, {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">greet</span>(), <span class="st">"Hello User!"</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="continuous-integration" class="level2">
<h2 class="anchored" data-anchor-id="continuous-integration">Continuous Integration</h2>
<p>So you‚Äôve got <code>check()</code> passing on your computer, but will your package work on a different OS? With a different version of R?</p>
<p>How can you find out and be alerted if changes you make will break the package for others?</p>
<p>Continuous Integration (CI) is a practice of automatically building your package (or running an analysis pipeline) on a variety of systems every time you make changes to your code (and push to GitHub)</p>
<p>We‚Äôll use GitHub Actions and <code>usethis</code> to set this up.</p>
<ul>
<li><p><code>use_github_action_check_release()</code> sets up a <em>basic</em> action that runs <code>check()</code> using the latest release of R running on Linux</p></li>
<li><p><code>use_github_action_check_standard()</code> runs a more intense check of your package on linux, macOs, and Windows using the latest release of R and the development version of R.</p></li>
<li><p>Add a badge to your readme with <code>use_github_actions_badge()</code></p></li>
<li><p>Commit, push, and inspect GitHub repo</p></li>
</ul>
</section>
</section>
<section id="sharing-your-package" class="level1">
<h1>Sharing your Package</h1>
<section id="installing-from-github" class="level2">
<h2 class="anchored" data-anchor-id="installing-from-github">Installing from GitHub</h2>
<ul>
<li>Add instructions to README for using <code>remotes::install_github("username/reponame")</code> to install</li>
<li>Set up a website for your package with <code>use_pkgdown()</code> and <code>use_pkgdown_github_pages()</code></li>
</ul>
</section>
</section>
<section id="polishing-your-package" class="level1">
<h1>Polishing your Package</h1>
<ul>
<li><p>Add a vignette to your package with <code>use_vignette()</code></p></li>
<li><p>Add a code of conduct to your repo with <code>use_code_of_conduct()</code></p></li>
<li><p>Make a checklist of what you need to do to submit your package to CRAN with <code>use_release_issue()</code></p></li>
</ul>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<section id="set-up-build-tools" class="level2">
<h2 class="anchored" data-anchor-id="set-up-build-tools">Set up build tools</h2>
<blockquote class="blockquote">
<p>This may not be strictly necessary until you want to build packages containing C or C++ code. Especially if you are using RStudio, you can set this aside for now. The IDE will alert you and provide support once you try to do something that requires you to setup your development environment</p>
</blockquote>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If it isn‚Äôt going to work for someone, they can use Posit Cloud as a fallback. Build tools come pre-installed there.</p>
</div>
</div>
<section id="macos" class="level3">
<h3 class="anchored" data-anchor-id="macos">macOS</h3>
<p>Check if you already have xcode command line tools installed:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">xcode-select</span> <span class="at">-p</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you get an error instead of a path like <code>/Library/Developer/CommandLineTools</code>, then you need to install xcode command line tools with:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">xcode-select</span> <span class="at">--install</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="windows" class="level3">
<h3 class="anchored" data-anchor-id="windows">Windows</h3>
<p>Install Rtools from <a href="https://cran.r-project.org/bin/windows/Rtools/" class="uri">https://cran.r-project.org/bin/windows/Rtools/</a></p>
<ul>
<li><p><strong>Do <em>not</em></strong> select the box for ‚ÄúEdit the system PATH‚Äù. devtools and RStudio should put Rtools on the <code>PATH</code> automatically when it is needed.</p></li>
<li><p><strong>Do</strong> select the box for ‚ÄúSave version information to registry‚Äù. It should be selected by default.</p></li>
</ul>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>